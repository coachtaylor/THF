# TransFitness - Complete Product Requirements Document
## Comprehensive Design System & Implementation Guide

**Version:** 3.0  
**Date:** November 28, 2025  
**Status:** Active Development - Design System Implementation Phase

---

## EXECUTIVE SUMMARY

**TransFitness** is a specialized mobile fitness app for transgender and non-binary athletes providing personalized workout programming that accounts for:
- Chest binding safety during exercise
- HRT effects on training capacity and recovery
- Post-surgical recovery protocols for gender-affirming surgeries
- Gender-specific training goals (feminization vs masculinization)
- Dysphoria-aware exercise selection

**Core Value Proposition:** The only fitness app that understands trans athlete needs, providing safe, effective, affirming programming.

**Current Phase:** Design system implementation and UI redesign  
**Target Launch:** Q1 2026

---


## TECHNICAL STACK

**Frontend:**
- React Native 0.72+ with TypeScript 5.0+
- Expo 49+ for development
- React Navigation 6.x
- expo-linear-gradient (gradients)
- react-native-svg (icons)
- react-native-reanimated v3 (animations)

**Backend:**
- expo-sqlite (local database)
- Supabase (cloud database, optional sync)

**Fonts:**
- Gotham (headers/display): Bold 700, Medium 500
- Poppins (body/UI): Semibold 600, Medium 500, Regular 400

---

## COLOR SYSTEM

### Primary (Cyan/Turquoise)
```
50:  #ecfeff (lightest)
100: #cffafe
200: #a5f3fc
300: #67e8f9 (light accent)
400: #22d3ee (active states)
500: #06b6d4 (MAIN BRAND - CTAs, progress, links)
600: #0891b2 (gradient end, hover)
700: #0e7490 (pressed states)
800: #155e75 (borders)
900: #164e63 (darkest)
```

**Usage:**
- 500: Primary buttons, active states, progress
- 500â†’600: Gradient backgrounds
- 400: Stats, highlighted text
- 300: Badges, secondary highlights

### Secondary (Red/Rose)
```
50:  #fff1f2
100: #ffe4e6
200: #fecdd3
300: #fda4af
400: #fb7185
500: #f43f5e (ACCENT - celebrations, achievements)
600: #e11d48
700: #be123c
800: #9f1239
900: #881337
```

### Backgrounds (Dark Theme)
```
deep:    #0a0f14 (app background)
mid:     #151b23 (cards level 1)
raised:  #1f2937 (cards level 2, inputs)
surface: #2d3748 (modals, overlays)
```

### Text
```
primary:   #ffffff (headings, high emphasis)
secondary: #d1d5db (body, medium emphasis)
tertiary:  #9ca3af (captions, low emphasis)
disabled:  #6b7280
```

### Borders
```
subtle:  rgba(255, 255, 255, 0.05)
medium:  rgba(255, 255, 255, 0.1)
strong:  rgba(255, 255, 255, 0.2)
```

### Semantic
```
success: #22c55e (green)
warning: #f59e0b (orange)
error:   #ef4444 (red)
info:    #3b82f6 (blue)
```

---

## TYPOGRAPHY

### Display (Hero Text)
```
Display 1: Gotham 36px / -1.5 / 700
Display 2: Gotham 32px / -1 / 700
```

### Headings
```
H1: Gotham 28px / -0.8 / 700
H2: Gotham 24px / -0.5 / 700
H3: Gotham 20px / -0.3 / 700
```

### Body
```
Body Large: Poppins 17px / 0 / 400 / 26lh
Body:       Poppins 15px / 0 / 400 / 22lh
Body Small: Poppins 13px / 0 / 400 / 20lh
```

### Labels
```
Label Large: Poppins 15px / 0 / 600
Label:       Poppins 13px / 0 / 600
Caption:     Poppins 11px / 0.5 / 500 / UPPERCASE
```

### Stats
```
Stat Hero:   Gotham 48px / -2 / 700
Stat Large:  Gotham 32px / -1 / 700
Stat Medium: Gotham 24px / -0.5 / 600
```

---

## SPACING (8px Grid)
```
1: 4px    (xxs)
2: 8px    (xs)
3: 12px   (s)
4: 16px   (m - standard)
5: 20px   (l - card padding)
6: 24px   (xl - section margins)
8: 32px   (xxl)
10: 40px  (xxxl)
12: 48px  (xxxxl)
16: 64px  (xxxxxl)
```

**Common Usage:**
- Card padding: 20px
- Section margins: 24px bottom
- Button padding: 24px horizontal
- Input padding: 16px
- Stack gap: 12-16px
- Inline gap: 8-12px

---

## CORNER RADIUS
```
xs:   4px   (badges)
sm:   8px   (small elements)
md:   12px  (buttons, inputs)
lg:   16px  (cards)
xl:   20px  (modals)
xxl:  24px  (hero elements)
full: 9999px (pills, avatars)
```

---

## SHADOWS
```
xs: offset(0,1) / opacity 0.05 / blur 2 / elevation 1
sm: offset(0,2) / opacity 0.1  / blur 4 / elevation 2
md: offset(0,4) / opacity 0.15 / blur 8 / elevation 4
lg: offset(0,8) / opacity 0.2  / blur 16 / elevation 8
xl: offset(0,12) / opacity 0.25 / blur 24 / elevation 12
```

**Colored Glows:**
```
Primary glow: shadowColor #06b6d4 / opacity 0.3 / blur 12
Secondary glow: shadowColor #f43f5e / opacity 0.3 / blur 12
```

---

## COMPONENT LIBRARY

### Buttons

**Primary Button:**
- Height: 56px
- Border radius: 12px
- Background: Linear gradient cyan.500 â†’ cyan.600
- Text: Label Large, white, Poppins 600
- Shadow: md with cyan glow
- States: hover (90% opacity), pressed (scale 0.98), disabled (50% opacity)

**Secondary Button:**
- Height: 56px
- Border radius: 12px
- Background: transparent
- Border: 2px solid border.medium
- Text: Label Large, text.primary
- States: hover (border strong), pressed (scale 0.98)

**Icon Button:**
- Size: 44x44
- Border radius: 12px
- Background: background.raised
- Icon: 24x24, text.secondary

### Cards

**Elevated Card:**
- Background: background.mid
- Border radius: 16px
- Padding: 20px
- Border: 1px solid border.subtle
- Shadow: md

**Glass Card:**
- Background: rgba(background.mid, 0.8) + backdrop blur
- Border radius: 16px
- Padding: 20px
- Border: 1px solid border.medium
- Shadow: lg

**Gradient Card:**
- Gradient: cyan.500 (15% opacity) â†’ transparent
- Overlay: background.mid at 80%
- Border radius: 16px
- Border: 1px cyan (20% opacity)
- Shadow: lg with cyan glow

### Badges

**Status Badge:**
- Height: 24px
- Padding: 6-10px horizontal
- Border radius: 6px
- Text: Caption
- Variants: primary, success, warning, error, info (10% bg opacity)

**Count Badge:**
- Min size: 20x20
- Border radius: full
- Background: secondary.500
- Text: 11px, 700 weight, white

### Inputs

**Text Input:**
- Height: 56px
- Border radius: 12px
- Background: background.raised
- Border: 2px solid border.subtle
- Padding: 16px
- Focus: border cyan.500 with glow

**Number Input:**
- Decrement/Increment buttons: 48x48
- Display: flex 1, height 56px
- Number: Stat Medium, cyan.500

**Slider:**
- Track: 8px height, background.raised
- Fill: cyan.500 gradient
- Thumb: 32x32 circle, white, shadow with glow

---

## SCREEN SPECIFICATIONS

### 1. HOME DASHBOARD

**Layout Elements:**
- Header: avatar (44x44) | "TransFitness" | notification icon
- Welcome: time-based greeting + name
- Streak card: glass effect, large number + fire icon
- HRT tracker (conditional if on_hrt)
- Surgery recovery (conditional if active recovery)
- Today's workout card
- Weekly stats: 3 cards (workouts, volume, RPE)
- Quick actions (optional)

**HRT Tracker - Show IF:**
`profile.on_hrt === true && hrt_type && hrt_start_date`

Display:
- HRT type (Testosterone, Estrogen, etc)
- Duration in months (calculated from start_date)
- Medication icon
- Cyan accent color

**Surgery Recovery - Show IF:**
`surgeries.length > 0 && any surgery.fully_healed === false`

Display for EACH active recovery:
- Surgery type
- Weeks post-op (calculated from date)
- Recovery phase:
  - < 6 weeks: "ğŸ›‘ Early Recovery"
  - 6-12 weeks: "âš ï¸ Active Recovery"
  - â‰¥ 12 weeks: "âœ… Late Recovery"
- Progress bar (weeks/12 * 100%)
- Warning colors

**Today's Workout - Show IF workout exists:**
- 4px cyan accent bar top
- Workout name (H3)
- Duration badge
- Stats row: exercises, sets, duration
- Safety badges conditional:
  - IF binds_chest: "Binding-safe"
  - IF surgery < 12 weeks: "Post-op modified"
- Primary button: "Start Workout"

**Empty State (no workout):**
- "No workout scheduled today"
- "Browse Workouts" button
- "Generate New Plan" button

### 2. ONBOARDING FLOW (8 Screens)

**Common Pattern:**
- Progress indicator: "Step X of 8" + dots
- Back button (except first screen)
- Screen title (H1)
- Subtitle (Body)
- Content area (screen-specific)
- Continue button (primary, bottom)
- Validation before Continue enabled

**Screen 1: Gender Identity**
- Select one: MTF / FTM / Non-binary / Questioning
- Optional pronouns (multiple selection)
- Save: gender_identity, pronouns

**Screen 2: HRT Status**
- Yes/No question
- IF YES:
  - HRT type: Estrogen/Testosterone (filtered by gender)
  - Start date: month + year dropdowns
  - Auto-calculate duration display
- Save: on_hrt, hrt_type, hrt_start_date, hrt_months_duration

**Screen 3: Binding Info**
- Yes/No question
- IF YES:
  - Frequency: Daily/Sometimes/Rarely/Never
  - Duration: number input (hours)
  - Warning if > 8 hours
  - Binder type (optional): dropdown
- Save: binds_chest, binding_frequency, binding_duration_hours, binder_type

**Screen 4: Surgery History**
- Yes/No question
- IF YES:
  - Checkboxes: Top/Bottom/FFS/Orchiectomy/Other
  - FOR EACH checked:
    - Date picker
    - Auto-calculate weeks post-op
    - Show recovery phase
  - Warning banner if any < 12 weeks
  - Optional notes field
- Save: surgeries[] (type, date, weeks_post_op, fully_healed, notes)

**Screen 5: Goals**
- Select primary goal (filtered by gender):
  - Feminization (if MTF/NB)
  - Masculinization (if FTM/NB)
  - General Fitness
  - Strength
  - Endurance
- Info box showing program details
- Save: primary_goal

**Screen 6: Experience & Preferences**
- Experience level: Beginner/Intermediate/Advanced
- Workout frequency: 2-6 days/week (picker)
- Session duration: 30/45/60/90 min (buttons)
- Equipment: multi-select checkboxes (min 1 required)
- Save: fitness_experience, workout_frequency, session_duration, equipment[]

**Screen 7: Dysphoria Triggers (Optional)**
- ALL optional, prominent Skip button
- Trigger checklist: mirrors, tight clothing, body contact, etc
- Optional notes textarea (500 char max)
- Save: dysphoria_triggers[], dysphoria_notes

**Screen 8: Review & Generate**
- Collapsible sections showing all data
- Edit button on each section (navigates back)
- Conditional sections (show only if data exists)
- Warning banners if surgery < 12 weeks or heavy binding
- "Generate My Program" button
- Loading state: "Generating Your Program..."
- On success: navigate to Home

### 3. WORKOUT OVERVIEW (Pre-Workout)

**Layout:**
- Header: back button + workout name + menu
- Hero stats: 3 cards (duration, exercises, sets)
- Warm-up: expandable section, simple list
- Main workout: exercise cards with thumbnails
  - Exercise name, target muscle
  - Sets Ã— reps prescription
  - Safety badges (conditional)
  - Chevron for details
- Cool-down: expandable section
- Safety checkpoints: warning card (conditional)
- "Start Workout" button (primary, gradient)

**Data:**
- Load from: `getWorkout(workoutId)`
- Exercises with full details
- Safety checkpoints (if applicable)

**Navigation:**
- Start Workout â†’ SessionPlayer

### 4. SESSION PLAYER (Active Workout)

**Phase Management:**
`warm-up â†’ main â†’ cool-down â†’ completion`

**Warm-up Phase:**
- Simple checklist
- "Start Main Workout" button

**Main Phase:**
- Header: back (with confirmation) | timer | menu
- Progress bar: "Exercise X / Y" + percentage
- Exercise card:
  - Name, target muscle
  - Video thumbnail (200px) with play overlay
  - "Set X of Y" counter
- Input controls:
  - Reps: number input with +/-
  - Weight: number input with +/-
  - RPE: slider 1-10 with labels
- "Complete Set" button (64px, gradient)
- Secondary actions: "View Cues", "Skip Set"
- Previous sets history (collapsible)

**Rest Timer Overlay:**
- Full screen (bg.deep 95% opacity)
- Circular progress ring
- Countdown timer (Stat Hero)
- Next exercise preview
- "Skip Rest" button

**Business Logic:**
```
On Complete Set:
1. Log set data (reps, weight, RPE)
2. Check: more sets for this exercise?
   - YES: Show rest timer
   - NO: Move to next exercise
3. Check: more exercises?
   - YES: Continue
   - NO: Move to cool-down phase
```

**Cool-down Phase:**
- Simple checklist
- "Complete Workout" button
- Save session data
- Navigate to CompletionScreen

### 5. COMPLETION SCREEN (Celebration)

**Layout:**
- Hero: trophy icon (100x100, gradient)
- "Workout Complete!" (Display 1)
- Encouragement text
- Stats grid (2 columns):
  - Duration (gradient card)
  - Exercises count
  - Sets count
  - Avg RPE
  - Total volume (if > 0)
- Achievements (conditional badges)
- Summary checklist:
  - âœ“ Warm-up completed
  - âœ“ X exercises completed
  - âœ“ Cool-down completed
- Feedback (optional):
  - Mood selector (5 emoji buttons)
  - Notes textarea
- "Save & Continue" button (primary, gradient)

**Data Calculations:**
- duration = completedAt - startedAt
- totalSets = completedSets.length
- avgRPE = average of all RPEs
- totalVolume = sum(reps Ã— weight)

**Navigation:**
- Save & Continue â†’ PlanView
- Update streak
- Update weekly stats

### 6. PLAN VIEW (Workouts Tab)

**Layout:**
- Header: back + "My Plan" + settings
- Weekly calendar: 7 day cards
  - Day name + number
  - Workout dot indicator
  - Today: cyan border
  - Selected: glow effect
- Workout cards for selected day:
  - Workout name
  - Duration badge
  - Stats (exercises, sets, minutes)
  - Exercise preview (3-4 items)
  - "Start Workout" button
- Empty state (no plan):
  - "No plan yet"
  - "Generate Plan" button

**Navigation:**
- Tap day â†’ show workouts
- Tap workout â†’ WorkoutOverview
- Generate Plan â†’ call planGenerator

### 7. PROGRESS TAB

**Layout:**
- Streak display:
  - Current streak (large)
  - Longest streak
  - Streak calendar (optional)
- Weekly stats:
  - Workouts completed
  - Total volume
  - Avg RPE
  - Total minutes
- Session history:
  - Recent sessions list
  - Tap â†’ SessionDetail
- Filter options: This Week / This Month / All Time

### 8. SETTINGS TAB

**Sections:**
1. Profile: Edit/View profile
2. Preferences: duration, frequency, equipment
3. Workout Settings: auto-rest, rest duration, videos
4. Data & Sync: cloud sync, export, clear data
5. Plan Management: generate new, view current
6. About: version, privacy, terms, support
7. Account: logout, delete account

---

# TransFitness App - Complete Flowchart & Decision Tree

## ğŸ¯ APP ENTRY POINTS

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   APP LAUNCH    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Has User â”‚ â—„â”€â”€â”€ Check: Profile exists in local storage?
    â”‚ Profile? â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â”‚         â”‚
   NO        YES
    â”‚         â”‚
    â–¼         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚WELCOME â”‚  â”‚HOME DASH â”‚
â”‚ SCREEN â”‚  â”‚  BOARD   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“‹ ONBOARDING FLOW (8 Steps)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚WELCOME SCREENâ”‚
â”‚ "Why Trans-  â”‚
â”‚  Fitness?"   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  DISCLAIMER  â”‚
â”‚ "Acknowledge â”‚
â”‚   & Agree"   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ONBOARDING WORKFLOW                        â”‚
â”‚                     (8-Step Process)                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

STEP 1: Gender Identity
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Select Gender    â”‚
â”‚ Identity:        â”‚
â”‚ â€¢ Trans woman    â”‚
â”‚ â€¢ Trans man      â”‚
â”‚ â€¢ Non-binary     â”‚
â”‚ â€¢ Questioning    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€â”€â”€ Optional: Select pronouns
         â”‚
         â–¼
    Save: gender_identity, pronouns
         â”‚
         â–¼

STEP 2: HRT Status
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  On HRT?         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â”‚         â”‚
   NO        YES
    â”‚         â”‚
    â”‚         â”œâ”€â”€â”€ Select HRT Type:
    â”‚         â”‚    â€¢ Estrogen + Anti-androgens (if MTF/NB)
    â”‚         â”‚    â€¢ Testosterone (if FTM/NB)
    â”‚         â”‚
    â”‚         â”œâ”€â”€â”€ Enter Start Date:
    â”‚         â”‚    â€¢ Month dropdown
    â”‚         â”‚    â€¢ Year dropdown
    â”‚         â”‚    â€¢ Auto-calculate duration
    â”‚         â”‚
    â”‚         â–¼
    â””â”€â”€â”€â”€â”€â”€â”€â”€â–ºSave: on_hrt, hrt_type, hrt_start_date, hrt_months_duration
              â”‚
              â–¼

STEP 3: Binding Info
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Bind chest?      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â”‚         â”‚
   NO        YES
    â”‚         â”‚
    â”‚         â”œâ”€â”€â”€ Select Frequency:
    â”‚         â”‚    â€¢ Daily / Sometimes / Rarely / Never
    â”‚         â”‚
    â”‚         â”œâ”€â”€â”€ Enter Duration:
    â”‚         â”‚    â€¢ Hours per session
    â”‚         â”‚    â€¢ Warning if > 8 hours
    â”‚         â”‚
    â”‚         â”œâ”€â”€â”€ Select Binder Type (optional):
    â”‚         â”‚    â€¢ Commercial / Sports bra / Other
    â”‚         â”‚
    â”‚         â–¼
    â””â”€â”€â”€â”€â”€â”€â”€â”€â–ºSave: binds_chest, binding_frequency, binding_duration_hours, binder_type
              â”‚
              â–¼

STEP 4: Surgery History
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Had surgery?     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â”‚         â”‚
   NO        YES
    â”‚         â”‚
    â”‚         â”œâ”€â”€â”€ Check surgeries (multiple):
    â”‚         â”‚    â–¡ Top surgery
    â”‚         â”‚    â–¡ Bottom surgery
    â”‚         â”‚    â–¡ FFS
    â”‚         â”‚    â–¡ Orchiectomy
    â”‚         â”‚    â–¡ Other
    â”‚         â”‚
    â”‚         â”œâ”€â”€â”€ FOR EACH surgery:
    â”‚         â”‚    â€¢ Enter date
    â”‚         â”‚    â€¢ Auto-calculate weeks post-op
    â”‚         â”‚    â€¢ Show recovery phase:
    â”‚         â”‚      â”€ < 6 weeks: "ğŸ›‘ Early Recovery"
    â”‚         â”‚      â”€ 6-12 weeks: "âš ï¸ Active Recovery"
    â”‚         â”‚      â”€ â‰¥ 12 weeks: "âœ… Late Recovery"
    â”‚         â”‚    â€¢ Optional notes
    â”‚         â”‚
    â”‚         â”œâ”€â”€â”€ Warning if any < 12 weeks:
    â”‚         â”‚    "âš ï¸ Workouts will be modified"
    â”‚         â”‚
    â”‚         â–¼
    â””â”€â”€â”€â”€â”€â”€â”€â”€â–ºSave: surgeries[] (type, date, weeks_post_op, fully_healed, notes)
              â”‚
              â–¼

STEP 5: Goals
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Primary Goal:    â”‚
â”‚ (filtered by     â”‚
â”‚ gender_identity) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€â”€â”€ Options:
         â”‚    â€¢ Feminization (if MTF/NB)
         â”‚    â€¢ Masculinization (if FTM/NB)
         â”‚    â€¢ General Fitness
         â”‚    â€¢ Strength
         â”‚    â€¢ Endurance
         â”‚
         â”œâ”€â”€â”€ Show impact info box
         â”‚
         â–¼
    Save: primary_goal, secondary_goals
         â”‚
         â–¼

STEP 6: Experience & Preferences
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4 Sections:      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€â”€â”€ 1. Experience Level:
         â”‚    â€¢ Beginner / Intermediate / Advanced
         â”‚
         â”œâ”€â”€â”€ 2. Workout Frequency:
         â”‚    â€¢ 2-6 days per week (picker)
         â”‚
         â”œâ”€â”€â”€ 3. Session Duration:
         â”‚    â€¢ 30 / 45 / 60 / 90 minutes
         â”‚
         â”œâ”€â”€â”€ 4. Equipment (multiple):
         â”‚    â–¡ Bodyweight
         â”‚    â–¡ Dumbbells
         â”‚    â–¡ Resistance Bands
         â”‚    â–¡ Barbell
         â”‚    â–¡ Kettlebell
         â”‚    â–¡ Pull-up Bar
         â”‚    â–¡ Other
         â”‚    (at least 1 required)
         â”‚
         â–¼
    Save: fitness_experience, workout_frequency, session_duration, equipment[]
         â”‚
         â–¼

STEP 7: Dysphoria Triggers (Optional)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Select triggers  â”‚
â”‚ (all optional):  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€â”€â”€ Trigger checklist:
         â”‚    â–¡ Looking at chest
         â”‚    â–¡ Tight clothing
         â”‚    â–¡ Mirrors
         â”‚    â–¡ Body contact
         â”‚    â–¡ Crowded spaces
         â”‚    â–¡ Locker rooms
         â”‚    â–¡ Voice sounds
         â”‚    â–¡ Other
         â”‚
         â”œâ”€â”€â”€ Optional notes field
         â”‚
         â”œâ”€â”€â”€ "Skip" button always available
         â”‚
         â–¼
    Save: dysphoria_triggers[], dysphoria_notes
         â”‚
         â–¼

STEP 8: Review & Generate
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Review all sections:     â”‚
â”‚ 1. Gender Identity       â”‚
â”‚ 2. HRT Status (if on_hrt)â”‚
â”‚ 3. Binding (if binds)    â”‚
â”‚ 4. Surgery (if any)      â”‚
â”‚ 5. Goals                 â”‚
â”‚ 6. Experience            â”‚
â”‚ 7. Dysphoria (if any)    â”‚
â”‚                          â”‚
â”‚ Each section has Edit    â”‚
â”‚ button to go back        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€â”€â”€ Show warnings if applicable:
         â”‚    â€¢ Surgery < 12 weeks
         â”‚    â€¢ Heavy binding
         â”‚
         â”œâ”€â”€â”€ "Generate My Program" button
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ GENERATE PLAN      â”‚
â”‚ (Loading state)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€â”€â”€ Call: generatePlan(profile)
         â”‚    â€¢ Filter exercises by:
         â”‚      - equipment
         â”‚      - experience level
         â”‚      - binding safety
         â”‚      - surgery recovery
         â”‚      - dysphoria triggers
         â”‚    â€¢ Apply gender emphasis
         â”‚    â€¢ Create workout schedule
         â”‚    â€¢ Generate warm-up/cool-down
         â”‚
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ SUCCESS â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  HOME SCREEN   â”‚
â”‚  (with plan)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ  MAIN APP NAVIGATION

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    BOTTOM TAB BAR                         â”‚
â”‚  [Home]  [Workouts]  [Progress]  [Settings]             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚         â”‚           â”‚            â”‚
    â–¼         â–¼           â–¼            â–¼
```

---

## ğŸ  HOME SCREEN DECISION TREE

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  HOME SCREEN    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€â”€â”€ ALWAYS SHOW:
         â”‚    â€¢ Header (avatar, wordmark, notifications)
         â”‚    â€¢ Welcome message (time-based greeting)
         â”‚    â€¢ Current streak card (glass effect)
         â”‚    â€¢ Weekly stats (3 cards)
         â”‚
         â”œâ”€â”€â”€ CONDITIONAL: HRT Tracker
         â”‚    â””â”€â”€â”€ IF profile.on_hrt === true:
         â”‚         â€¢ Show HRT card
         â”‚         â€¢ Display: HRT type
         â”‚         â€¢ Display: Duration (months from start_date)
         â”‚         â€¢ Icon: medication
         â”‚
         â”œâ”€â”€â”€ CONDITIONAL: Surgery Recovery
         â”‚    â””â”€â”€â”€ IF surgeries.length > 0 AND any surgery.fully_healed === false:
         â”‚         â€¢ FOR EACH active recovery:
         â”‚           - Surgery type
         â”‚           - Weeks post-op
         â”‚           - Recovery phase indicator
         â”‚           - Progress bar
         â”‚
         â”œâ”€â”€â”€ CONDITIONAL: Today's Workout
         â”‚    â”‚
         â”‚    â”œâ”€â”€â”€ IF todaysWorkout exists:
         â”‚    â”‚    â€¢ Show workout card
         â”‚    â”‚    â€¢ 4px cyan accent bar
         â”‚    â”‚    â€¢ Workout name
         â”‚    â”‚    â€¢ Stats (exercises, sets, duration)
         â”‚    â”‚    â€¢ Safety badges (conditional):
         â”‚    â”‚      - IF binds_chest: show "Binding-safe"
         â”‚    â”‚      - IF any surgery < 12 weeks: show "Post-op modified"
         â”‚    â”‚    â€¢ "Start Workout" button
         â”‚    â”‚    â”‚
         â”‚    â”‚    â””â”€â”€â”€ ON TAP: Navigate to WorkoutOverview
         â”‚    â”‚
         â”‚    â””â”€â”€â”€ ELSE (no workout):
         â”‚         â€¢ Show empty state card
         â”‚         â€¢ "No workout scheduled"
         â”‚         â€¢ "Browse Workouts" button
         â”‚         â€¢ "Generate New Plan" button
         â”‚         â”‚
         â”‚         â””â”€â”€â”€ ON TAP "Generate": Call generatePlan()
         â”‚
         â””â”€â”€â”€ Quick Actions (optional)
              â€¢ "Track Progress"
              â€¢ "View Exercises"
              â€¢ "Settings"
```

---

## ğŸ’ª WORKOUT FLOW DECISION TREE

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ WORKOUTS TAB       â”‚
â”‚ (PlanView)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€â”€â”€ CONDITIONAL: Has active plan?
         â”‚    â”‚
         â”‚    â”œâ”€â”€â”€ YES: Show Plan
         â”‚    â”‚    â€¢ Weekly calendar (7 days)
         â”‚    â”‚    â€¢ Highlight today
         â”‚    â”‚    â€¢ Show workouts for each day
         â”‚    â”‚    â€¢ Tap day â†’ show workout detail
         â”‚    â”‚    â”‚
         â”‚    â”‚    â””â”€â”€â”€ Tap workout card:
         â”‚    â”‚         â””â”€â”€â”€ Navigate to WorkoutOverview
         â”‚    â”‚
         â”‚    â””â”€â”€â”€ NO: Show empty state
         â”‚         â€¢ "No plan yet"
         â”‚         â€¢ "Generate Plan" button
         â”‚         â”‚
         â”‚         â””â”€â”€â”€ ON TAP: Call generatePlan()
         â”‚
         â””â”€â”€â”€ Top actions:
              â€¢ "Generate New Plan" (regenerate)
              â€¢ "Edit Profile" (adjust preferences)

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ WORKOUT OVERVIEW   â”‚
â”‚ (Pre-workout)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€â”€â”€ Load workout data: getWorkout(workoutId)
         â”‚
         â”œâ”€â”€â”€ DISPLAY:
         â”‚    â€¢ Hero stats (duration, exercises, sets)
         â”‚    â€¢ Warm-up section (expandable)
         â”‚    â€¢ Main workout (exercise cards):
         â”‚      - Exercise thumbnail
         â”‚      - Name, target muscle
         â”‚      - Sets x Reps prescription
         â”‚      - Safety tags (conditional)
         â”‚      - Chevron for details
         â”‚    â€¢ Cool-down section (expandable)
         â”‚    â€¢ Safety checkpoints (conditional):
         â”‚      - IF workout.safety_checkpoints.length > 0:
         â”‚        Show warning card
         â”‚
         â”œâ”€â”€â”€ VALIDATION:
         â”‚    â€¢ Check all data loaded
         â”‚    â€¢ Verify exercise data exists
         â”‚
         â””â”€â”€â”€ "Start Workout" button
              â”‚
              â””â”€â”€â”€ ON TAP:
                   â€¢ Convert workout format
                   â€¢ Navigate to SessionPlayer

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SESSION PLAYER    â”‚
â”‚  (Active workout)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€â”€â”€ PHASE MANAGEMENT:
         â”‚    â””â”€â”€â”€ Current phase:
         â”‚         â€¢ warm-up
         â”‚         â€¢ main
         â”‚         â€¢ cool-down
         â”‚
         â”œâ”€â”€â”€ IF phase === 'warm-up':
         â”‚    â€¢ Show warm-up exercises
         â”‚    â€¢ Simple list with checkboxes
         â”‚    â€¢ Duration display
         â”‚    â€¢ "Start Main Workout" button
         â”‚    â”‚
         â”‚    â””â”€â”€â”€ ON TAP: setPhase('main')
         â”‚
         â”œâ”€â”€â”€ IF phase === 'main':
         â”‚    â”‚
         â”‚    â”œâ”€â”€â”€ DISPLAY:
         â”‚    â”‚    â€¢ Header: timer, back, menu
         â”‚    â”‚    â€¢ Progress bar (X/Y exercises)
         â”‚    â”‚    â€¢ Exercise card:
         â”‚    â”‚      - Name, target muscle
         â”‚    â”‚      - Video thumbnail
         â”‚    â”‚      - Set counter (Set X of Y)
         â”‚    â”‚    â€¢ Input controls:
         â”‚    â”‚      - Reps (number input with +/-)
         â”‚    â”‚      - Weight (number input with +/-)
         â”‚    â”‚      - RPE (slider 1-10)
         â”‚    â”‚    â€¢ "Complete Set" button
         â”‚    â”‚
         â”‚    â”œâ”€â”€â”€ ON "Complete Set":
         â”‚    â”‚    â”‚
         â”‚    â”‚    â”œâ”€â”€â”€ Log set data:
         â”‚    â”‚    â”‚    â€¢ exerciseId
         â”‚    â”‚    â”‚    â€¢ setNumber
         â”‚    â”‚    â”‚    â€¢ reps
         â”‚    â”‚    â”‚    â€¢ weight
         â”‚    â”‚    â”‚    â€¢ rpe
         â”‚    â”‚    â”‚    â€¢ completedAt
         â”‚    â”‚    â”‚
         â”‚    â”‚    â”œâ”€â”€â”€ DECISION: More sets?
         â”‚    â”‚    â”‚    â”‚
         â”‚    â”‚    â”‚    â”œâ”€â”€â”€ YES (setNumber < totalSets):
         â”‚    â”‚    â”‚    â”‚    â€¢ Show rest timer overlay
         â”‚    â”‚    â”‚    â”‚    â€¢ Countdown from rest_seconds
         â”‚    â”‚    â”‚    â”‚    â€¢ "Skip Rest" button
         â”‚    â”‚    â”‚    â”‚    â””â”€â”€â”€ After rest: back to same exercise
         â”‚    â”‚    â”‚    â”‚
         â”‚    â”‚    â”‚    â””â”€â”€â”€ NO (all sets done):
         â”‚    â”‚    â”‚         â€¢ Move to next exercise
         â”‚    â”‚    â”‚         â€¢ currentExerciseIndex++
         â”‚    â”‚    â”‚
         â”‚    â”‚    â””â”€â”€â”€ DECISION: More exercises?
         â”‚    â”‚         â”‚
         â”‚    â”‚         â”œâ”€â”€â”€ YES: Show next exercise
         â”‚    â”‚         â”‚
         â”‚    â”‚         â””â”€â”€â”€ NO (all exercises done):
         â”‚    â”‚              â€¢ setPhase('cool-down')
         â”‚    â”‚
         â”‚    â”œâ”€â”€â”€ Secondary actions:
         â”‚    â”‚    â€¢ "Skip Set" (ghost button)
         â”‚    â”‚    â€¢ "View Cues" (show modal)
         â”‚    â”‚    â€¢ "See Video" (play video)
         â”‚    â”‚
         â”‚    â””â”€â”€â”€ Back button (with confirmation):
         â”‚         â””â”€â”€â”€ IF completedSets.length > 0:
         â”‚              â€¢ Show Alert: "Exit workout?"
         â”‚              â€¢ Options: "Exit" / "Continue"
         â”‚
         â””â”€â”€â”€ IF phase === 'cool-down':
              â€¢ Show cool-down exercises
              â€¢ Simple list with checkboxes
              â€¢ "Complete Workout" button
              â”‚
              â””â”€â”€â”€ ON TAP:
                   â€¢ Save session data
                   â€¢ Navigate to CompletionScreen

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ COMPLETION SCREEN  â”‚
â”‚ (Celebration)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€â”€â”€ DISPLAY:
         â”‚    â€¢ Hero: Trophy icon (gradient)
         â”‚    â€¢ Title: "Workout Complete!"
         â”‚    â€¢ Encouragement message
         â”‚    â€¢ Stats grid (2 columns):
         â”‚      - Duration (gradient card)
         â”‚      - Exercises count
         â”‚      - Sets count
         â”‚      - Avg RPE
         â”‚      - Total volume (if > 0)
         â”‚    â€¢ Achievements (conditional)
         â”‚    â€¢ Summary checklist:
         â”‚      âœ“ Warm-up completed
         â”‚      âœ“ X exercises completed
         â”‚      âœ“ Cool-down completed
         â”‚    â€¢ Feedback (optional):
         â”‚      - Mood selector (5 options)
         â”‚      - Notes textarea
         â”‚
         â”œâ”€â”€â”€ Calculate stats:
         â”‚    â€¢ duration = completedAt - startedAt
         â”‚    â€¢ totalSets = completedSets.length
         â”‚    â€¢ avgRPE = average of all set RPEs
         â”‚    â€¢ totalVolume = sum(reps Ã— weight)
         â”‚    â€¢ uniqueExercises = unique exerciseIds
         â”‚
         â”œâ”€â”€â”€ "Save & Continue" button
         â”‚    â”‚
         â”‚    â””â”€â”€â”€ ON TAP:
         â”‚         â€¢ Haptic feedback
         â”‚         â€¢ Call onSaveSession()
         â”‚         â€¢ Update streak
         â”‚         â€¢ Update weekly stats
         â”‚         â€¢ Navigate back to PlanView
         â”‚
         â””â”€â”€â”€ "Share" button (optional)
              â””â”€â”€â”€ ON TAP: Share workout summary
```

---

## ğŸ“Š PROGRESS TAB DECISION TREE

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PROGRESS TAB      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€â”€â”€ Load data:
         â”‚    â€¢ getCurrentStreak()
         â”‚    â€¢ getWeeklyStats()
         â”‚    â€¢ getRecentSessions()
         â”‚
         â”œâ”€â”€â”€ DISPLAY:
         â”‚    â€¢ Streak display:
         â”‚      - Current streak number (large)
         â”‚      - Longest streak
         â”‚      - Streak calendar (optional)
         â”‚    â€¢ Weekly stats:
         â”‚      - Workouts completed
         â”‚      - Total volume
         â”‚      - Avg RPE
         â”‚      - Total minutes
         â”‚    â€¢ Session history:
         â”‚      - List of recent sessions
         â”‚      - Tap session â†’ SessionDetail
         â”‚
         â””â”€â”€â”€ Filter options:
              â€¢ "This Week"
              â€¢ "This Month"
              â€¢ "All Time"

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SESSION DETAIL    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€â”€â”€ Load session: getSession(sessionId)
         â”‚
         â”œâ”€â”€â”€ DISPLAY:
         â”‚    â€¢ Session date/time
         â”‚    â€¢ Duration
         â”‚    â€¢ Workout name
         â”‚    â€¢ Exercise list:
         â”‚      - Exercise name
         â”‚      - Sets x Reps performed
         â”‚      - Weight used
         â”‚      - RPE for each set
         â”‚    â€¢ Session notes (if any)
         â”‚
         â””â”€â”€â”€ Actions:
              â€¢ "View Workout" (go to WorkoutOverview)
              â€¢ "Repeat Workout" (start same workout)
```

---

## âš™ï¸ SETTINGS TAB DECISION TREE

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   SETTINGS TAB     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€â”€â”€ SECTIONS:
         â”‚
         â”œâ”€â”€â”€ 1. PROFILE:
         â”‚    â€¢ "Edit Profile" â†’ Navigate to onboarding
         â”‚    â€¢ "View Profile" â†’ Show current profile data
         â”‚
         â”œâ”€â”€â”€ 2. PREFERENCES:
         â”‚    â€¢ Session duration (30/45/60/90 min)
         â”‚    â€¢ Workout frequency (2-6 days)
         â”‚    â€¢ Equipment available
         â”‚    â€¢ Low sensory mode (toggle)
         â”‚    â€¢ Save changes â†’ updateProfile()
         â”‚
         â”œâ”€â”€â”€ 3. WORKOUT SETTINGS:
         â”‚    â€¢ Auto-rest timer (toggle)
         â”‚    â€¢ Rest duration (30-180 seconds)
         â”‚    â€¢ Show exercise videos (toggle)
         â”‚    â€¢ Show trans tips (toggle)
         â”‚
         â”œâ”€â”€â”€ 4. DATA & SYNC:
         â”‚    â€¢ Cloud sync (toggle)
         â”‚    â€¢ Last synced: [timestamp]
         â”‚    â€¢ "Sync Now" button
         â”‚    â€¢ Export data (CSV/JSON)
         â”‚    â€¢ Clear local data (with confirmation)
         â”‚
         â”œâ”€â”€â”€ 5. PLAN MANAGEMENT:
         â”‚    â€¢ "Generate New Plan"
         â”‚    â€¢ "View Current Plan"
         â”‚    â€¢ Plan history
         â”‚
         â”œâ”€â”€â”€ 6. ABOUT:
         â”‚    â€¢ App version
         â”‚    â€¢ Privacy policy
         â”‚    â€¢ Terms of service
         â”‚    â€¢ Contact support
         â”‚    â€¢ Disclaimer
         â”‚
         â””â”€â”€â”€ 7. ACCOUNT:
              â€¢ Log out (with confirmation)
              â€¢ Delete account (with confirmation)
```

---

## ğŸ”„ DATA FLOW & STORAGE

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DATA ARCHITECTURE                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

LOCAL STORAGE (SQLite)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ profiles_storage   â”‚ â† User profile data (JSON)
â”‚ plans_storage      â”‚ â† Generated workout plans
â”‚ sessions           â”‚ â† Completed workout sessions
â”‚ streaks            â”‚ â† Streak tracking
â”‚ weekly_aggregates  â”‚ â† Stats rollups
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

CLOUD STORAGE (Supabase)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ profiles           â”‚ â† Synced profile (if enabled)
â”‚ exercises          â”‚ â† Exercise library (read-only)
â”‚ trans_tips         â”‚ â† Trans-specific tips (read-only)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

DATA SYNC FLOW:
1. User completes onboarding â†’ Save to local SQLite
2. IF cloud_sync_enabled:
   â€¢ Upload profile to Supabase
   â€¢ Store synced_at timestamp
3. On app launch:
   â€¢ Load profile from SQLite
   â€¢ IF cloud_sync_enabled AND needs sync:
     - Download latest from Supabase
     - Merge conflicts (last-write-wins)
4. Workout generation:
   â€¢ Fetch exercises from Supabase (cached)
   â€¢ Generate plan with local profile
   â€¢ Save plan to SQLite
5. Session completion:
   â€¢ Save to local SQLite immediately
   â€¢ IF cloud_sync_enabled:
     - Queue for upload
     - Sync on next connection
```

---

## ğŸš¨ ERROR HANDLING & EDGE CASES

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ERROR SCENARIOS                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

NO INTERNET CONNECTION
â””â”€â”€â”€ During onboarding:
     â€¢ Allow profile creation (local only)
     â€¢ Warn: "Saved locally, will sync when connected"
     â€¢ Continue to plan generation
     
â””â”€â”€â”€ During workout:
     â€¢ Continue normally (all data local)
     â€¢ Queue sync for later

â””â”€â”€â”€ During plan generation:
     â€¢ FAIL if exercises not cached
     â€¢ Show: "Connection required for first plan"
     â€¢ Retry button

CORRUPTED DATA
â””â”€â”€â”€ Profile load fails:
     â€¢ Try to recover from backup
     â€¢ If fails: restart onboarding
     â€¢ Preserve workout history if possible

â””â”€â”€â”€ Plan load fails:
     â€¢ Generate new plan
     â€¢ Log error for debugging

VALIDATION FAILURES
â””â”€â”€â”€ Onboarding:
     â€¢ Block continue until valid
     â€¢ Show inline error messages
     â€¢ Highlight invalid fields

â””â”€â”€â”€ Workout generation:
     â€¢ Check: equipment available
     â€¢ Check: at least 3 exercises match criteria
     â€¢ If fails: relax constraints progressively
     â€¢ Last resort: show error + edit profile

APP CRASHES
â””â”€â”€â”€ During workout:
     â€¢ Auto-save progress every set
     â€¢ On restart: offer "Resume workout"
     â€¢ Restore from last saved state

â””â”€â”€â”€ During onboarding:
     â€¢ Resume from last completed step
     â€¢ Pre-fill previous answers
```

---

## ğŸ¯ DECISION CRITERIA SUMMARY

**Profile Completeness:**
- Minimal viable: gender_identity, primary_goal, fitness_experience, equipment
- Full profile: + HRT, binding, surgeries, dysphoria

**Workout Generation:**
- MUST HAVE: equipment, experience level
- FILTERS: binding safety, surgery recovery, dysphoria triggers
- EMPHASIS: gender goals (feminization/masculinization)

**Safety Checks:**
- IF binds_chest AND binding_frequency === 'daily': prioritize binder-safe exercises
- IF any surgery < 12 weeks: exclude high-impact, filter by contraindications
- IF heavy_binding: exclude exercises flagged as heavy_binding_unsafe

**UI Conditionals:**
- Show HRT tracker: profile.on_hrt === true
- Show surgery recovery: surgeries.length > 0 AND any fully_healed === false
- Show binding badges: profile.binds_chest === true
- Show dysphoria considerations: dysphoria_triggers.length > 0

---

**END OF FLOWCHART**

## DATA MODELS

### Profile
```typescript
{
  // Required
  user_id: string
  gender_identity: 'mtf' | 'ftm' | 'nonbinary' | 'questioning'
  primary_goal: 'feminization' | 'masculinization' | 'general_fitness' | 'strength' | 'endurance'
  on_hrt: boolean
  binds_chest: boolean
  surgeries: Surgery[]
  fitness_experience: 'beginner' | 'intermediate' | 'advanced'
  workout_frequency: number // 2-6
  session_duration: number // 30, 45, 60, 90
  equipment: string[]
  created_at: Date
  updated_at: Date
  
  // Optional
  pronouns?: string
  hrt_type?: 'estrogen_blockers' | 'testosterone' | 'none'
  hrt_start_date?: Date
  hrt_months_duration?: number
  binding_frequency?: 'daily' | 'sometimes' | 'rarely' | 'never'
  binding_duration_hours?: number
  binder_type?: string
  dysphoria_triggers?: DysphoriaTrigger[]
  dysphoria_notes?: string
}
```

### Surgery
```typescript
{
  type: 'top_surgery' | 'bottom_surgery' | 'ffs' | 'orchiectomy' | 'other'
  date: Date
  weeks_post_op?: number // calculated
  fully_healed?: boolean // weeks_post_op >= 12
  notes?: string
}
```

### Workout
```typescript
{
  id: string
  name: string
  duration_minutes: number
  exercises: Exercise[]
  warm_up: Exercise[]
  cool_down: Exercise[]
  safety_checkpoints?: SafetyCheckpoint[]
}
```

---

## BUSINESS LOGIC

### Workout Generation

**Input:** Profile data  
**Output:** Workout plan

**Steps:**
1. Filter exercises by equipment
2. Filter by safety (binding, surgery, HRT)
3. Apply gender emphasis scoring
4. Select template by experience level
5. Adjust volume for HRT/recovery
6. Generate warm-up and cool-down
7. Add safety checkpoints
8. Save to database

### Safety Rules

**IF binds_chest && binding_frequency === 'daily':**
- Filter: only binder_aware === true
- Prioritize: heavy_binding_safe === true
- Exclude: exercises requiring deep breathing

**IF any surgery with weeks_post_op < 12:**
- Filter: check contraindications array
- Exclude: exercises affecting surgery site
- Reduce: upper body volume if top surgery

**IF on_hrt:**
- Adjust: volume based on hrt_months_duration
- Reduce: recovery time if estrogen
- Increase: recovery time if testosterone < 6 months

---

## IMPLEMENTATION ROADMAP

### Week 1: Design System Setup
- Duplicate UI kits in Figma
- Change fonts to Gotham + Poppins
- Design 3-5 key screens
- Create tokens.ts with exact values
- Build core components (Button, Card, Badge, Input)

### Week 2: Simple Screens
- Welcome/Splash
- Settings
- About/Legal screens

### Week 3: Medium Screens
- Home Dashboard (with conditional sections)
- Plan View
- Workout Overview

### Week 4: Complex Screens
- Session Player
- Completion Screen
- Onboarding Flow (8 screens)

### Migration Process Per Screen:
1. Reference Figma design
2. Replace inline styles with design system
3. Update colors to tokens.colors.*
4. Update spacing to tokens.spacing.*
5. Update typography to tokens.typography.*
6. Test functionality (MUST still work)
7. Commit with message: "refactor: migrate [Screen] to design system"

---

## SUCCESS METRICS

**Design Quality:**
- 95%+ match to Figma designs
- 100% design system usage (no inline colors/spacing)
- Professional appearance (user testing)

**Technical:**
- All features functional
- 8px grid compliance
- Proper typography hierarchy
- Consistent spacing

**User Experience:**
- 44x44 minimum touch targets
- WCAG AA contrast
- Smooth animations (60fps)
- Intuitive navigation

---

## APPENDICES

### A. Key Decisions Log
- Cyan/red color scheme chosen over purple for energy and distinction
- Gotham + Poppins for premium feel
- Dark theme primary for modern aesthetic
- Local-first architecture for privacy
- 8px spacing grid for consistency

### B. Future Enhancements
- Social features (share workouts)
- Workout history analytics
- Exercise video library
- Nutrition tracking
- Community challenges
- Premium tier features

### C. Technical Constraints
- React Native limitations (no CSS backdrop-filter)
- SQLite for local storage
- Supabase for cloud (optional)
- Expo managed workflow
- iOS/Android cross-platform

---

**END OF PRD**
EOFPRD
echo "âœ… PRD created successfully"
Output

âœ… PRD created successfully